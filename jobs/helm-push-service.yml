helm-push-service:
  stage: deploy
  needs:
    - job: determine-version
      artifacts: true
    - job: build-gradle
      artifacts: true
  variables:
    CHART_NAME: $SERVICE_CHART_NAME
    CHART_VERSION: $GitVersion_SemVer
  trigger:
    include:
      - project: 'org.salgar.fsm.akka/ci-cd-gitlab-pipelines'
        file: '/jobs/helm-push.yml'
      - artifact: build/
        job: build-gradle
    strategy: depend
  except:
    - merge_request
