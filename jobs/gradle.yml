build-gradle:
  stage: build
  needs:
    - job: determine-version
      artifacts: true
  image: gradle:7.6.1-jdk17-alpine
  script:
    - |
      export
      gradle --build-cache --no-daemon build -Pversion=$GitVersion_SemVer
  cache:
    key: "$CI_COMMIT_REF_NAME"
    policy: push
    paths:
      - build
      - .gradle
  artifacts:
    paths:
      - build/helm/charts/